# Generate a consult letter based on the SOAP note.

### Prompt engineering

## Quickstart

Clone the repo and run the following commands on your machine:

### 1. Activate virtual environment and install Python libraries via

```bash
cd starting_project\consult_letter
python -m venv ./venv
.\venv\Scripts\activate
pip install -r requirements.txt
pip install openai
```

### 2. Insert personal API key in [openai_chat.py](./starting_project/consult_letter/openai_chat.py)

# Input

The input parameters are:

- user_info: a dictionary contains the bio of the doctor, such as
  {
  "name": "Dr. John Doe", # the name of the doctor
  "email": "drjohndoe@clinic.com", # the email of the doctor
  }
- specialty: a string represents the specialty of the doctor, such as "Otolaryngology"
- note_content: a dictionary contains the content of the SOAP note, where the key is the section name and the value is the content of the section, such as
  {
  "Patient Name": "Betty",
  "Chief Complaint": "Ear pain",
  "History of Present Illness": "\n• Left-sided ear pain\n• No drainage noted\n• Intermittent hearing loss reported\n• Pain worsens with chewing\n• Inconsistent use of mouthpiece for teeth clenching\n• Pain relief when lying on contralateral side",
  "Social History": "\n• Occasional Reactive use for allergies\n• Allergy to salt",
  "The Review of Systems": "\n• Intermittent hearing loss\n• No swallowing issues\n• No nasal congestion\n• Allergies present, takes Reactive occasionally",
  "Current Medications": "\n• Reactive for allergies",
  "Allergies": "\n• Allergic to salt",
  "Physical Examination": "\n• Right ear canal clear\n• Right tympanic membrane intact\n• Right ear space aerated\n• Left ear canal normal\n• Left eardrum normal, no fluid or infection\n• Nose patent\n• Paranasal sinuses normal\n• Oral cavity clear\n• Tonsils absent\n• Good dentition\n• Pain along pterygoid muscles\n• Heart and lungs clear\n• No neck tenderness or lymphadenopathy",
  "Assessment and Plan": "Problem 1:\nEar pain\nDDx:\n• Temporomandibular joint disorder: Likely given the jaw pain, history of teeth clenching, and normal ear examination.\nPlan:\n- Ordered audiogram to check hearing\n- Advised to see dentist for temporomandibular joint evaluation\n- Recommended ibuprofen for pain\n- Suggested soft foods diet\n- Avoid chewing gum, hard candies, hard fruits, ice, and nuts\n- Follow-up if symptoms persist"
  }
- note_date: a string represents the date of the SOAP note, such as "2022-01-01"
  """

# Output generated by program:

I am writing to provide you with an update on Jane, who was seen in our office on January 1, 2022, for an obstetric consultation regarding the management of her current pregnancy and her planned repeat cesarean section.

Jane is a 35-year-old female who is currently pregnant with her third child. Her obstetric history includes one previous live birth via cesarean section in 2019 and one abortion due to fetal health issues. Her first child was born at approximately 37 weeks with a birth weight of 2.5 kilograms. Jane had COVID-19 in 2021, following which she experienced heart pain. However, she has since been evaluated and is in good health. She is allergic to minocycline.

Upon review, Jane expressed her decision to proceed with a planned repeat cesarean section due to her previous cesarean delivery. We have scheduled this procedure for 39 weeks gestation. I have advised her to proceed to City Medical Center for an emergency cesarean section should labor commence before the scheduled date. Jane is encouraged to maintain daily walks of 20 to 30 minutes to support her blood pressure and the baby�s health.

Our plan includes a follow-up appointment in three weeks, with subsequent visits every two weeks, and then weekly as her due date approaches. During our discussion, we reviewed the purpose of the cesarean section for a safe delivery and discussed the associated risks such as bleeding, infection, or injury to surrounding organs, albeit rare. Spinal anesthesia will be administered to ensure Jane's comfort while allowing her to remain conscious during the procedure.

Jane is currently active, participating in pregnancy yoga weekly, and walking when possible. She and her spouse have a supportive local friend network and plan to have postpartum assistance from her mother and a babysitter for two months.

Please feel free to contact me if you have any further questions or require additional information regarding her care.

Best regards,
Dr. John Doe
Obstetrics & Gynecology (ObGyn)
drjohndoe@clinic.com
